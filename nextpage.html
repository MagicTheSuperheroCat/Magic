<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Magic Universe</title>
  <style>
    body {
      margin: 0;
      background: black;
      overflow: hidden;
    }
    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <canvas id="starCanvas"></canvas>

  <script>
  const canvas = document.getElementById('starCanvas');
  const ctx = canvas.getContext('2d');
  let width = canvas.width = window.innerWidth;
  let height = canvas.height = window.innerHeight;

  window.addEventListener('resize', () => {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
  });

  let particles = JSON.parse(localStorage.getItem('particles')) || [];

  if (particles.length === 0) {
    for (let i = 0; i < 300; i++) {
      let angle = Math.random() * 2 * Math.PI;
      let isComet = Math.random() < 0.1;
      particles.push({
        x: Math.random() * width,
        y: Math.random() * height,
        size: Math.random() * 2 + 1,
        isComet: isComet,
        dx: isComet ? Math.cos(angle) * (1 + Math.random() * 2) : 0,
        dy: isComet ? Math.sin(angle) * (1 + Math.random() * 2) : 0,
        lifetime: 0
      });
    }
  }

  function animateParticles() {
    ctx.clearRect(0, 0, width, height);
    particles.forEach(p => {
      // Neue Kometen zuf√§llig starten
      if (!p.isComet && Math.random() < 0.001) {
        let angle = Math.random() * 2 * Math.PI;
        p.isComet = true;
        p.dx = Math.cos(angle) * (1 + Math.random() * 2);
        p.dy = Math.sin(angle) * (1 + Math.random() * 2);
        p.lifetime = 0;
      }

      if (p.isComet) {
        p.x += p.dx;
        p.y += p.dy;
        p.lifetime += 1;

        if (p.lifetime > 60) {
          p.isComet = false;
          p.dx = 0;
          p.dy = 0;
        }

        if (p.x < 0 || p.x > width || p.y < 0 || p.y > height) {
          p.x = Math.random() * width;
          p.y = Math.random() * height;
        }
      }

      let opacity = 0.5 + Math.random() * 0.5;

      ctx.beginPath();
ctx.arc(p.x, p.y, p.size, 0, 2 * Math.PI);
ctx.fillStyle = `rgba(255, 255, 200, ${opacity})`;
ctx.fill();

    });

    requestAnimationFrame(animateParticles);
  }

  animateParticles();
</script>
</body>
</html>
